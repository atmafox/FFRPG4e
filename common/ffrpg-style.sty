\ProvidesPackage{ffrpg-style}

\RequirePackage{geometry}
\RequirePackage[table,xcdraw,svgnames]{xcolor}
\RequirePackage{fontspec}
\RequirePackage{graphicx}
\RequirePackage{multicol}
\RequirePackage{enumitem}
\RequirePackage{fancyhdr}
\RequirePackage{titlesec}
\RequirePackage{placeins}
\RequirePackage{hyperref}
\RequirePackage{booktabs}
\RequirePackage{adjustbox}

% configure page geometry
\geometry{
	letterpaper,
	margin=0.65in,
	left=0.5in,
	right=0.5in,
	bottom=40pt,
	footskip=20pt}

% Get our common images added to the path
\graphicspath{{../img/}}

% Get our fonts set up, ferrum is missing styles so fake them
\providefontfamily\ferrum{ferrum.otf}[
	Path			= ../common/font/,
	AutoFakeSlant	= 0.2,
	AutoFakeBold	= 1.5 ]
\providefontfamily\arabtype{arabtype.ttf}[
	Path			= ../common/font/,
	AutoFakeBold	= 1.5 ]
\providefontfamily\yumin{yumin.ttf}[
	Path			= ../common/font/,
	AutoFakeBold	= 1.5 ]
\setmainfont{Caladea}

% Colours for the two characters
\definecolor{mogred}{cmyk}{0, 0.78, 0.93, 0.55}
\definecolor{bocoblue}{cmyk}{0.95, 0.78, 0, 0.25}

% Column centered Boco, inherit existing columns
\newenvironment{boco}{
	 \par\medskip
	 \yumin
	 \begin{center}
	 \includegraphics[width=0.1\textwidth]{../img/common/boco.png}
	 \end{center}
	 \bgroup\color{bocoblue}\small%
	}
	{\egroup
	 \medskip}

% Used for page centered Boco but two column text
\newenvironment{multiboco}{
	 \par\medskip
	 \yumin
	 \begin{center}
	 \includegraphics[width=0.1\textwidth]{../img/common/boco.png}
	 \end{center}
	 \begin{multicols}{2}
	 \bgroup\color{bocoblue}\small%
	}
	{\egroup
	 \end{multicols}
	 \medskip}

% Column centered Mog, inherit existing columns
\newenvironment{mog}{
	 \par\medskip
	 \arabtype
	 \begin{center}
	 \includegraphics[width=0.1\textwidth]{../img/common/mog.png}
	 \end{center}
	 \bgroup\color{mogred}\Large%
	}
	{\egroup
	 \medskip}

% Page centered mog, two column text
\newenvironment{multimog}{
	 \par\medskip
	 \arabtype
	 \begin{center}
	 \includegraphics[width=0.1\textwidth]{../img/common/mog.png}
	 \end{center}
	 \begin{multicols}{2}
	 \bgroup\color{mogred}\Large%
	}
	{\egroup
	 \end{multicols}
	 \medskip}

% Get all our header/footers done
\pagestyle{fancy}
  \fancyhf{}
  \renewcommand{\chaptermark}[1]{\markboth{#1}{}}
  \fancyfoot[C]{%
    \adjincludegraphics[valign=M,height=10pt]{../img/common/earthcrystal.png} \hspace{75pt} %
    \adjincludegraphics[valign=M,height=10pt]{../img/common/aircrystal.png} \hspace{75pt} %
    \leftmark\ - Page \thepage \hspace{75pt} %
    \adjincludegraphics[valign=M,height=10pt]{../img/common/crystalfire.pdf} \hspace{75pt} %
    \adjincludegraphics[valign=M,height=10pt]{../img/common/crystalwater.pdf}%
  }

% And headers/footers for the chapter pages
\fancypagestyle{plain}{%
  \fancyhf{}
  \fancyfoot[C]{%
    \adjincludegraphics[valign=M,height=10pt]{../img/common/earthcrystal.png} \hspace{75pt} %
    \adjincludegraphics[valign=M,height=10pt]{../img/common/aircrystal.png} \hspace{75pt} %
    \leftmark \hspace{75pt} %
    \adjincludegraphics[valign=M,height=10pt]{../img/common/crystalfire.pdf} \hspace{75pt} %
    \adjincludegraphics[valign=M,height=10pt]{../img/common/crystalwater.pdf}%
    }
  }

% Alright, let's set appropriate section layouts
\titleformat{\chapter}{\ferrum\huge\bfseries\centering}{\thechapter}{1em}{}
\titleformat{\section}{\ferrum\LARGE\itshape\centering}{\thesection}{1em}{}
\titleformat{\subsection}{\ferrum\Large\upshape\centering}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\ferrum\large\itshape\centering}{\thesubsubsection}{1em}{}

\endinput
